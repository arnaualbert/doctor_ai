{% include 'menu.html' %}

    <div class="container">
      <h3>
        Local alignment
      </h3>
      <a class="btn btn-secondary" href="/blosum_local" class="card-link">Try With Proteins</a>
      <form method="POST" action="/localalignment" enctype="multipart/form-data" onsubmit="return validarFormulario()">
        <div class="row row-cols-2">
          <div class="col">
            <div class="form-group">
              <label for="fasta1">Query</label>
              <input class="form-control" type="file" id="fastafile1" name="fasta1local" value="{{ request.form['fasta1local'] }}" accept=".fasta">
            </div>
          </div>
          <div class="col">
            <div class="form-group">
              <label for="fasta2">Target</label>
              <input class="form-control" type="file" id="fastafile2" name="fasta2local" value="{{ request.form['fasta2local'] }}" accept=".fasta">
            </div>
          </div>
            <div class="col">
              <label>Match number:</label>
              <div class="form-group">
              <input class="form-control" type="number" name="match" id="match" value="{{ request.form['match'] }}" >
            </div>
            </div>
            <div class="col">
              <label>Mismatch number:</label>
              <div class="form-group">
              <input class="form-control" type="number" name="mismatch" id="mismatch" value="{{ request.form['mismatch'] }}" >
            </div>
            </div>

            <div class="col">
              <label>Gap number:</label>
              <div class="form-group">
              <input class="form-control" type="number" name="gap" id="gap" value="{{ request.form['gap'] }}" >
            </div>
            </div>

            <div class="col">
              <label>Gap Extend Left:</label>
              <div class="form-group">
              <input class="form-control" type="number" name="gapLeft" id="gapLeft" value="{{ request.form['gapLeft'] }}" >
            </div>
            </div>

            <div class="col">
              <label>Gap Extend Up:</label>
              <div class="form-group">
              <input class="form-control" type="number" name="gapUp" id="gapUp" value="{{ request.form['gapUp'] }}" >
            </div>
            </div><br>
            
            <div class="col">
              <label>Filename output</label>
              <input class="form-control" type="text" name="user_filename" id="user_filename">
            </div>
        </div><br>
        <button class="btn btn-primary" type="submit">Enviar</button>
      </form>
      <span id="errorMessage">{{message}}</span>
    </div>

    <script>
      function validarFormulario() {
        var fastafile1 = document.getElementById("fastafile1").value;
        var fastafile2 = document.getElementById("fastafile2").value;
        var match = document.getElementById("match").value;
        var mismatch = document.getElementById("mismatch").value;
        var gap = document.getElementById("gap").value;

        if (fastafile1 === "" || fastafile2 === "" || match === "" || mismatch === "" || gap === "") {
          var errorMessage = document.getElementById("errorMessage");
          errorMessage.innerHTML = "Please fill all the fields";
          return false;
        }
        return true;
      }
    </script>
    
</body>